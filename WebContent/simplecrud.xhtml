<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j">
<h:head>
	<title>Simple CRUD</title>
</h:head>

<h:body>
	<h3>List students</h3>
	<h:form rendered="#{not empty simpleCrudBean.list}">
		<rich:dataTable value="#{simpleCrudBean.list}" var="item" id="table" width="300px">
		 <rich:column>    
		 <f:facet name="header">        <h:outputText value="Id"/>    </f:facet>   
		 <h:outputText value="#{item.id}"/>
		 </rich:column>
		 
		 <rich:column sortBy="#{item.name}" id="name" sortOrder="#{simpleCrudBean.namesOrder}" sortType="custom">    
		 <f:facet name="header">
                    <a4j:commandLink value="Sort by Name" render="table" action="#{simpleCrudBean.sortByNames}" />
          </f:facet>   
		 <h:outputText value="#{item.name}"/>
		 </rich:column> 
		 
		 <rich:column sortBy="#{item.age}" id="age" sortOrder="#{simpleCrudBean.ageOrder}" sortType="custom">    
		<f:facet name="header">
                    <a4j:commandLink value="Sort by Age" render="table" action="#{simpleCrudBean.sortByAge}" />
          </f:facet>
		 <h:outputText value="#{item.age}"/> 
		 </rich:column>
		 
		 <rich:column>
		   <h:commandButton value="edit" action="#{simpleCrudBean.edit(item)}" />
         </rich:column> 
         
         <rich:column>
           <h:commandButton value="delete" action="#{simpleCrudBean.delete(item)}" />
         </rich:column>
    </rich:dataTable>
	</h:form>

	<h:panelGroup rendered="#{empty simpleCrudBean.list}">
		<p>No students! Please add students.</p>
	</h:panelGroup>

	<h:panelGroup rendered="#{!simpleCrudBean.edit}">
		<h3>Add student</h3>
		<h:form>
			<p>Name: <h:inputText value="#{simpleCrudBean.item.name}"/></p>
			<p>Age: <h:inputText value="#{simpleCrudBean.item.age}" /></p>
			<p>
				<h:commandButton value="add" action="#{simpleCrudBean.add}" />
				<h:commandButton value="reset" action="#{simpleCrudBean.resetAdd}" />
			</p>
		</h:form>
	</h:panelGroup>
	
	<h:panelGroup rendered="#{simpleCrudBean.edit}">
		<h3>Edit student #{simpleCrudBean.item.id}</h3>
		<h:form>
			<p>Name: <h:inputText value="#{simpleCrudBean.item.name}" /></p>
			<p>Age: <h:inputText value="#{simpleCrudBean.item.age}" /></p>
			<p>
				<h:commandButton value="save" action="#{simpleCrudBean.saveEdit}" />
				<h:commandButton value="cancel" action="#{simpleCrudBean.cancelEdit}" />
			</p>
		</h:form>
	</h:panelGroup>
	<p>
		<a href="#{appUrlStore.baseUrl}">Go back to index</a>
	</p>
</h:body>
</html>